# è‡ªåŠ¨æ›´æ–°æœºåˆ¶è¯¦è§£

## ğŸ“‹ ç›®å½•
- [ç‰ˆæœ¬è¯†åˆ«æœºåˆ¶](#ç‰ˆæœ¬è¯†åˆ«æœºåˆ¶)
- [è¿è¡Œé€»è¾‘æµç¨‹](#è¿è¡Œé€»è¾‘æµç¨‹)
- [ç‰ˆæœ¬å·ç®¡ç†](#ç‰ˆæœ¬å·ç®¡ç†)
- [å®é™…æ¡ˆä¾‹](#å®é™…æ¡ˆä¾‹)

---

## ğŸ” ç‰ˆæœ¬è¯†åˆ«æœºåˆ¶

### 1. ç‰ˆæœ¬å·æ¥æº

#### å½“å‰ç‰ˆæœ¬ï¼ˆæœ¬åœ°ï¼‰
```typescript
// Electron ä¸»è¿›ç¨‹è·å–å½“å‰ç‰ˆæœ¬
import { app } from 'electron'
const currentVersion = app.getVersion() // ä» package.json è¯»å–

// rss-desktop/package.json
{
  "version": "0.1.4"  // ğŸ‘ˆ å½“å‰å®‰è£…ç‰ˆæœ¬
}
```

#### æœ€æ–°ç‰ˆæœ¬ï¼ˆè¿œç¨‹ï¼‰
```typescript
// electron-updater ä» GitHub Releases è·å–
const updateInfo = await autoUpdater.checkForUpdates()

// GitHub Releases æä¾›çš„æ›´æ–°æ¸…å•æ–‡ä»¶
// https://github.com/xiongsircool/aurora-rss-reader/releases/download/latest/latest-mac.yml
version: 0.1.5
releaseDate: '2026-01-27T10:30:00.000Z'
files:
  - url: AuroraRSSReader-Mac-0.1.5.dmg
    sha512: abc123...
    size: 89234567
path: AuroraRSSReader-Mac-0.1.5.dmg
```

---

### 2. ç‰ˆæœ¬æ¯”è¾ƒç®—æ³•

electron-updater ä½¿ç”¨ **Semantic Versioning (semver)** è§„åˆ™ï¼š

```
ç‰ˆæœ¬æ ¼å¼: MAJOR.MINOR.PATCH[-prerelease]

ç¤ºä¾‹:
  0.1.4       (å½“å‰ç‰ˆæœ¬)
  0.1.5       (è¡¥ä¸æ›´æ–°) âœ… ä¼šæ›´æ–°
  0.2.0       (æ¬¡ç‰ˆæœ¬æ›´æ–°) âœ… ä¼šæ›´æ–°
  1.0.0       (ä¸»ç‰ˆæœ¬æ›´æ–°) âœ… ä¼šæ›´æ–°
  0.1.4-beta  (é¢„å‘å¸ƒç‰ˆæœ¬) âŒ é»˜è®¤ä¸æ›´æ–°
```

#### æ¯”è¾ƒé€»è¾‘ä¼ªä»£ç 
```typescript
function shouldUpdate(current: string, latest: string): boolean {
  // 0.1.4 vs 0.1.5
  const [curMajor, curMinor, curPatch] = current.split('.')
  const [latMajor, latMinor, latPatch] = latest.split('.')

  if (latMajor > curMajor) return true      // 1.0.0 > 0.1.4 âœ…
  if (latMajor < curMajor) return false

  if (latMinor > curMinor) return true      // 0.2.0 > 0.1.4 âœ…
  if (latMinor < curMinor) return false

  if (latPatch > curPatch) return true      // 0.1.5 > 0.1.4 âœ…

  return false  // ç›¸åŒç‰ˆæœ¬
}

// å®é™…ä½¿ç”¨ semver åº“
import semver from 'semver'
semver.gt('0.1.5', '0.1.4')  // true
```

---

### 3. æ›´æ–°æ¸…å•æ–‡ä»¶

electron-builder åœ¨æ‰“åŒ…æ—¶è‡ªåŠ¨ç”Ÿæˆå¹³å°ç‰¹å®šçš„æ›´æ–°é…ç½®ï¼š

#### macOS: `latest-mac.yml`
```yaml
version: 0.1.5
files:
  - url: AuroraRSSReader-Mac-0.1.5.dmg
    sha512: 8a3f2c1e...  # æ–‡ä»¶æ ¡éªŒå’Œ
    size: 89234567
  - url: AuroraRSSReader-Mac-0.1.5.zip  # å·®åˆ†æ›´æ–°ç”¨
    sha512: 7b2d1a9c...
    size: 45123456
path: AuroraRSSReader-Mac-0.1.5.dmg
sha512: 8a3f2c1e...
releaseDate: '2026-01-27T10:30:00.000Z'
```

#### Windows: `latest.yml`
```yaml
version: 0.1.5
path: AuroraRSSReader-Windows-0.1.5-x64-Setup.exe
sha512: 9c4e3b2a...
releaseDate: '2026-01-27T10:30:00.000Z'
```

#### Linux: `latest-linux.yml`
```yaml
version: 0.1.5
path: AuroraRSSReader-Linux-0.1.5-x64.AppImage
sha512: 6f1a8d5c...
releaseDate: '2026-01-27T10:30:00.000Z'
```

---

## ğŸ”„ è¿è¡Œé€»è¾‘æµç¨‹

### å®Œæ•´æ›´æ–°æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨å¯åŠ¨ (App Ready)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  è·å–æœ¬åœ°ç‰ˆæœ¬ (package.json)  â”‚
            â”‚  currentVersion = "0.1.4"    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  è¯·æ±‚ GitHub Releases API                â”‚
            â”‚  GET /repos/.../releases/latest          â”‚
            â”‚  æˆ–è¯»å– latest-mac.yml                    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  è§£æè¿œç¨‹ç‰ˆæœ¬ä¿¡æ¯             â”‚
            â”‚  latestVersion = "0.1.5"    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ç‰ˆæœ¬æ¯”è¾ƒ (semver.gt)        â”‚
            â”‚  0.1.5 > 0.1.4 ?            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                   â”‚
           âœ… æœ‰æ›´æ–°           âŒ æ— æ›´æ–°
                â”‚                   â”‚
                â–¼                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  è§¦å‘äº‹ä»¶:          â”‚   â”‚  é™é»˜è·³è¿‡     â”‚
    â”‚  update-available  â”‚   â”‚  (ä¸æç¤ºç”¨æˆ·) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ˜¾ç¤ºæ›´æ–°æç¤ºå¯¹è¯æ¡†      â”‚
    â”‚  "å‘ç°æ–°ç‰ˆæœ¬ 0.1.5"     â”‚
    â”‚  [ç«‹å³ä¸‹è½½] [ç¨å]      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼ (ç”¨æˆ·ç‚¹å‡»"ç«‹å³ä¸‹è½½")
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å¼€å§‹ä¸‹è½½å®‰è£…åŒ…                 â”‚
    â”‚  autoUpdater.downloadUpdate()  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ä¸‹è½½ä¸­ (è§¦å‘è¿›åº¦äº‹ä»¶)          â”‚
    â”‚  download-progress              â”‚
    â”‚  â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘ 70%                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ä¸‹è½½å®Œæˆ + æ ¡éªŒ SHA512         â”‚
    â”‚  update-downloaded              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  æ˜¾ç¤ºé‡å¯æç¤º                   â”‚
    â”‚  "æ›´æ–°å·²ä¸‹è½½å®Œæˆ"               â”‚
    â”‚  [ç«‹å³é‡å¯] [ç¨å]             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼ (ç”¨æˆ·ç‚¹å‡»"ç«‹å³é‡å¯")
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  quitAndInstall()              â”‚
    â”‚  å…³é—­åº”ç”¨ â†’ å®‰è£…æ›´æ–° â†’ é‡å¯     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å®‰è£…ç¨‹åºè¿è¡Œ                   â”‚
    â”‚  - macOS: æ›¿æ¢ .app æ–‡ä»¶       â”‚
    â”‚  - Windows: æ‰§è¡Œ NSIS å®‰è£…     â”‚
    â”‚  - Linux: æ›¿æ¢ AppImage        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  åº”ç”¨ä»¥æ–°ç‰ˆæœ¬é‡å¯               â”‚
    â”‚  currentVersion = "0.1.5" âœ…   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ä»£ç å®ç°æµç¨‹

```typescript
// ========================================
// 1ï¸âƒ£ åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥æ›´æ–°
// ========================================
app.whenReady().then(() => {
  createWindow()

  if (!isDev && win) {
    // å¯åŠ¨ 5 ç§’åæ£€æŸ¥æ›´æ–°ï¼ˆé¿å…å½±å“å¯åŠ¨é€Ÿåº¦ï¼‰
    setTimeout(() => {
      autoUpdater.checkForUpdatesAndNotify()
    }, 5000)
  }
})

// ========================================
// 2ï¸âƒ£ å‘ç°æ–°ç‰ˆæœ¬äº‹ä»¶
// ========================================
autoUpdater.on('update-available', (info) => {
  // info ç»“æ„:
  // {
  //   version: '0.1.5',
  //   releaseDate: '2026-01-27T10:30:00.000Z',
  //   files: [...],
  //   path: 'AuroraRSSReader-Mac-0.1.5.dmg',
  //   sha512: '8a3f2c1e...'
  // }

  console.log('å‘ç°æ–°ç‰ˆæœ¬:', info.version)
  console.log('å½“å‰ç‰ˆæœ¬:', app.getVersion())

  // æ˜¾ç¤ºå¯¹è¯æ¡†
  dialog.showMessageBox(win, {
    type: 'info',
    title: 'å‘ç°æ–°ç‰ˆæœ¬',
    message: `å‘ç°æ–°ç‰ˆæœ¬ ${info.version}ï¼Œæ˜¯å¦ç«‹å³ä¸‹è½½ï¼Ÿ`,
    detail: `å½“å‰ç‰ˆæœ¬: ${app.getVersion()}\nå‘å¸ƒæ—¥æœŸ: ${info.releaseDate}`,
    buttons: ['ç«‹å³ä¸‹è½½', 'ç¨åæé†’', 'è·³è¿‡æ­¤ç‰ˆæœ¬'],
    defaultId: 0
  }).then(result => {
    if (result.response === 0) {
      autoUpdater.downloadUpdate()  // ğŸ‘ˆ å¼€å§‹ä¸‹è½½
    } else if (result.response === 2) {
      // è®°å½•è·³è¿‡çš„ç‰ˆæœ¬å·
      store.set('skippedVersion', info.version)
    }
  })
})

// ========================================
// 3ï¸âƒ£ ä¸‹è½½è¿›åº¦äº‹ä»¶
// ========================================
autoUpdater.on('download-progress', (progress) => {
  // progress ç»“æ„:
  // {
  //   bytesPerSecond: 524288,      // 512 KB/s
  //   percent: 70.5,               // 70.5%
  //   transferred: 62914560,       // 60 MB
  //   total: 89234567              // 85 MB
  // }

  const speed = (progress.bytesPerSecond / 1024 / 1024).toFixed(2)
  console.log(`ä¸‹è½½è¿›åº¦: ${progress.percent.toFixed(1)}% (${speed} MB/s)`)

  // å‘é€åˆ°æ¸²æŸ“è¿›ç¨‹æ˜¾ç¤ºè¿›åº¦æ¡
  win?.webContents.send('download-progress', progress)
})

// ========================================
// 4ï¸âƒ£ ä¸‹è½½å®Œæˆäº‹ä»¶
// ========================================
autoUpdater.on('update-downloaded', (info) => {
  console.log('âœ… æ›´æ–°å·²ä¸‹è½½:', info.version)

  // è‡ªåŠ¨æ ¡éªŒæ–‡ä»¶å®Œæ•´æ€§ï¼ˆSHA512ï¼‰
  // electron-updater è‡ªåŠ¨å®Œæˆï¼Œæ ¡éªŒå¤±è´¥ä¼šè§¦å‘ error äº‹ä»¶

  dialog.showMessageBox(win, {
    type: 'info',
    title: 'æ›´æ–°å·²ä¸‹è½½',
    message: 'æ–°ç‰ˆæœ¬å·²ä¸‹è½½å®Œæˆï¼Œåº”ç”¨å°†åœ¨é‡å¯åæ›´æ–°',
    buttons: ['ç«‹å³é‡å¯', 'ç¨åé‡å¯'],
    defaultId: 0
  }).then(result => {
    if (result.response === 0) {
      // é€€å‡ºå¹¶å®‰è£…
      // å‚æ•°: (isSilent=false, isForceRunAfter=true)
      autoUpdater.quitAndInstall(false, true)
    }
  })
})

// ========================================
// 5ï¸âƒ£ é”™è¯¯å¤„ç†
// ========================================
autoUpdater.on('error', (err) => {
  console.error('âŒ è‡ªåŠ¨æ›´æ–°é”™è¯¯:', err)

  // å¸¸è§é”™è¯¯:
  // - ç½‘ç»œè¿æ¥å¤±è´¥
  // - SHA512 æ ¡éªŒå¤±è´¥
  // - ç£ç›˜ç©ºé—´ä¸è¶³
  // - GitHub API é™æµ

  dialog.showMessageBox(win, {
    type: 'error',
    title: 'æ›´æ–°å¤±è´¥',
    message: 'æ£€æŸ¥æ›´æ–°æ—¶å‡ºé”™ï¼Œè¯·ç¨åé‡è¯•æˆ–æ‰‹åŠ¨ä¸‹è½½',
    detail: err.message,
    buttons: ['æ‰‹åŠ¨ä¸‹è½½', 'å…³é—­']
  }).then(result => {
    if (result.response === 0) {
      shell.openExternal('https://github.com/xiongsircool/aurora-rss-reader/releases')
    }
  })
})
```

---

## ğŸ“¦ ç‰ˆæœ¬å·ç®¡ç†

### Q1: ä¿®æ”¹ package.json åä¼šè‡ªåŠ¨æ›´æ–°å—ï¼Ÿ

**ç­”æ¡ˆï¼šä¼šï¼** ä½†éœ€è¦å®Œæ•´çš„å‘å¸ƒæµç¨‹ï¼š

```bash
# ========================================
# æ­¥éª¤ 1: ä¿®æ”¹ç‰ˆæœ¬å·
# ========================================
cd rss-desktop
# æ‰‹åŠ¨ç¼–è¾‘ package.json
vim package.json
# "version": "0.1.4" â†’ "0.1.5"

# æˆ–ä½¿ç”¨ npm version å‘½ä»¤ï¼ˆæ¨èï¼‰
npm version patch    # 0.1.4 â†’ 0.1.5
npm version minor    # 0.1.5 â†’ 0.2.0
npm version major    # 0.2.0 â†’ 1.0.0

# ========================================
# æ­¥éª¤ 2: æäº¤ä»£ç 
# ========================================
git add package.json
git commit -m "bump: version 0.1.5"
git tag v0.1.5  # ğŸ‘ˆ é‡è¦ï¼å¿…é¡»æ‰“ tag
git push origin main --tags

# ========================================
# æ­¥éª¤ 3: æ„å»ºå¹¶å‘å¸ƒ
# ========================================
pnpm pack  # ç”Ÿæˆå®‰è£…åŒ…

# electron-builder è‡ªåŠ¨:
# 1. è¯»å– package.json çš„ version å­—æ®µ
# 2. ç”Ÿæˆ latest-mac.yml (åŒ…å«æ–°ç‰ˆæœ¬å·)
# 3. ä¸Šä¼ åˆ° GitHub Releases (å¦‚æœé…ç½®äº† publish)

# ========================================
# æ­¥éª¤ 4: æ‰‹åŠ¨ä¸Šä¼ åˆ° GitHub Releases (å¦‚æœ CI æœªé…ç½®)
# ========================================
# 1. è¿›å…¥ https://github.com/xiongsircool/aurora-rss-reader/releases
# 2. ç‚¹å‡» "Draft a new release"
# 3. é€‰æ‹© tag: v0.1.5
# 4. ä¸Šä¼ ç”Ÿæˆçš„æ–‡ä»¶:
#    - AuroraRSSReader-Mac-0.1.5.dmg
#    - AuroraRSSReader-Mac-0.1.5.zip
#    - latest-mac.yml  ğŸ‘ˆ å¿…é¡»ä¸Šä¼ ï¼
# 5. å‘å¸ƒ Release

# ========================================
# æ­¥éª¤ 5: ç”¨æˆ·ç«¯è‡ªåŠ¨æ£€æµ‹
# ========================================
# ç”¨æˆ·æ‰“å¼€åº”ç”¨ â†’ autoUpdater æ£€æŸ¥ latest-mac.yml
# â†’ å‘ç° 0.1.5 > 0.1.4 â†’ æç¤ºæ›´æ–°
```

---

### Q2: ç‰ˆæœ¬å·å¿…é¡»éµå¾ª semver è§„èŒƒå—ï¼Ÿ

**å¼ºçƒˆå»ºè®®éµå¾ªï¼** å¦åˆ™å¯èƒ½å¯¼è‡´ç‰ˆæœ¬æ¯”è¾ƒé”™è¯¯ï¼š

```javascript
// âœ… æ­£ç¡®çš„ç‰ˆæœ¬å·
"0.1.4"       // æ¨è
"1.0.0"
"2.3.5-beta.1"

// âŒ é”™è¯¯çš„ç‰ˆæœ¬å·ï¼ˆå¯èƒ½å¯¼è‡´æ¯”è¾ƒå¤±è´¥ï¼‰
"v0.1.4"      // å¤šäº†å‰ç¼€ v
"0.1"         // ç¼ºå°‘ patch ç‰ˆæœ¬
"2024.01.27"  // æ—¥æœŸæ ¼å¼
"latest"      // éæ•°å­—
```

---

### Q3: å¦‚ä½•ç®¡ç†å¤šä¸ªç‰ˆæœ¬åˆ†æ”¯ï¼Ÿ

```bash
# ä½¿ç”¨ Git åˆ†æ”¯ç®¡ç†ä¸åŒç‰ˆæœ¬
main           # ç¨³å®šç‰ˆ (0.1.x)
develop        # å¼€å‘ç‰ˆ (0.2.0-beta)
release/1.0    # ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬

# é…ç½®ä¸åŒçš„æ›´æ–°æ¸ é“
autoUpdater.channel = 'latest'  // ç¨³å®šç‰ˆ
autoUpdater.channel = 'beta'    // æµ‹è¯•ç‰ˆ

# GitHub Releases å‘å¸ƒé¢„å‘å¸ƒç‰ˆæœ¬
git tag v0.2.0-beta.1
# åœ¨ GitHub ä¸Šå‹¾é€‰ "This is a pre-release"
```

---

## ğŸ§ª å®é™…æ¡ˆä¾‹æ¼”ç¤º

### åœºæ™¯ï¼šä» 0.1.4 æ›´æ–°åˆ° 0.1.5

```
æ—¶é—´çº¿:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T0: 2026-01-20
    å¼€å‘è€…å‘å¸ƒ 0.1.4 ç‰ˆæœ¬
    ç”¨æˆ· A å®‰è£… Aurora RSS Reader 0.1.4

T1: 2026-01-27
    å¼€å‘è€…ä¿®å¤ bugï¼Œå‘å¸ƒ 0.1.5 ç‰ˆæœ¬
    â”œâ”€â”€ ä¿®æ”¹ package.json: "version": "0.1.5"
    â”œâ”€â”€ git commit -m "bump: version 0.1.5"
    â”œâ”€â”€ git tag v0.1.5
    â”œâ”€â”€ pnpm pack (ç”Ÿæˆå®‰è£…åŒ…)
    â””â”€â”€ ä¸Šä¼ åˆ° GitHub Releases

T2: 2026-01-27 10:05
    ç”¨æˆ· A æ‰“å¼€åº”ç”¨
    â”œâ”€â”€ autoUpdater.checkForUpdates()
    â”œâ”€â”€ è¯·æ±‚ https://github.com/.../releases/download/latest/latest-mac.yml
    â”œâ”€â”€ è§£æ: version = "0.1.5"
    â”œâ”€â”€ æ¯”è¾ƒ: 0.1.5 > 0.1.4 âœ…
    â””â”€â”€ è§¦å‘ 'update-available' äº‹ä»¶

T3: 2026-01-27 10:05:03
    æ˜¾ç¤ºå¯¹è¯æ¡†: "å‘ç°æ–°ç‰ˆæœ¬ 0.1.5ï¼Œæ˜¯å¦ç«‹å³ä¸‹è½½ï¼Ÿ"
    ç”¨æˆ· A ç‚¹å‡» [ç«‹å³ä¸‹è½½]

T4: 2026-01-27 10:05:05
    å¼€å§‹ä¸‹è½½ AuroraRSSReader-Mac-0.1.5.zip (85 MB)
    â”œâ”€â”€ è¿›åº¦: 10% (8.5 MB) - 512 KB/s
    â”œâ”€â”€ è¿›åº¦: 50% (42.5 MB) - 524 KB/s
    â”œâ”€â”€ è¿›åº¦: 90% (76.5 MB) - 518 KB/s
    â””â”€â”€ å®Œæˆ: 100% (85 MB)

T5: 2026-01-27 10:07:45
    ä¸‹è½½å®Œæˆï¼Œæ ¡éªŒ SHA512
    â”œâ”€â”€ è®¡ç®—ä¸‹è½½æ–‡ä»¶çš„ SHA512: 8a3f2c1e...
    â”œâ”€â”€ å¯¹æ¯” latest-mac.yml ä¸­çš„ SHA512
    â””â”€â”€ æ ¡éªŒé€šè¿‡ âœ…

T6: 2026-01-27 10:07:46
    æ˜¾ç¤ºå¯¹è¯æ¡†: "æ›´æ–°å·²ä¸‹è½½å®Œæˆï¼Œåº”ç”¨å°†åœ¨é‡å¯åæ›´æ–°"
    ç”¨æˆ· A ç‚¹å‡» [ç«‹å³é‡å¯]

T7: 2026-01-27 10:07:48
    â”œâ”€â”€ å…³é—­å½“å‰åº”ç”¨ (0.1.4)
    â”œâ”€â”€ macOS è‡ªåŠ¨è§£å‹ .zip åˆ°ä¸´æ—¶ç›®å½•
    â”œâ”€â”€ æ›¿æ¢ /Applications/Aurora RSS Reader.app
    â”œâ”€â”€ åˆ é™¤æ—§ç‰ˆæœ¬æ–‡ä»¶
    â””â”€â”€ å¯åŠ¨æ–°ç‰ˆæœ¬åº”ç”¨

T8: 2026-01-27 10:07:52
    åº”ç”¨ä»¥æ–°ç‰ˆæœ¬å¯åŠ¨
    â”œâ”€â”€ app.getVersion() â†’ "0.1.5" âœ…
    â”œâ”€â”€ ç”¨æˆ·æ•°æ®ä¿ç•™ï¼ˆæ•°æ®åº“ã€é…ç½®æ–‡ä»¶ï¼‰
    â””â”€â”€ æ›´æ–°å®Œæˆï¼
```

---

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ
```typescript
// electron-updater è‡ªåŠ¨æ ¡éªŒ SHA512
// latest-mac.yml:
sha512: 8a3f2c1e4b6d9f0a...

// ä¸‹è½½åè‡ªåŠ¨è®¡ç®— SHA512 å¹¶æ¯”å¯¹
const downloadedSha512 = calculateSHA512(downloadedFile)
if (downloadedSha512 !== expectedSha512) {
  throw new Error('æ–‡ä»¶æ ¡éªŒå¤±è´¥ï¼å¯èƒ½è¢«ç¯¡æ”¹')
}
```

### 2. HTTPS å¼ºåˆ¶åŠ å¯†
```typescript
// æ‰€æœ‰æ›´æ–°è¯·æ±‚å¿…é¡»ä½¿ç”¨ HTTPS
autoUpdater.setFeedURL({
  provider: 'github',
  owner: 'xiongsircool',
  repo: 'aurora-rss-reader',
  protocol: 'https'  // ğŸ‘ˆ å¼ºåˆ¶ HTTPS
})
```

### 3. ä»£ç ç­¾åéªŒè¯ï¼ˆmacOSï¼‰
```bash
# macOS ä¼šéªŒè¯åº”ç”¨ç­¾å
codesign --verify --deep --strict /Applications/Aurora\ RSS\ Reader.app

# æœªç­¾åçš„åº”ç”¨ä¼šè¢« Gatekeeper é˜»æ­¢
# ç­¾ååå¯ä»¥é€šè¿‡ Apple å…¬è¯ï¼ˆNotarizationï¼‰
```

---

## ğŸ“Š å…³é”®é…ç½®æ€»ç»“

| é…ç½®é¡¹ | ä½ç½® | ä½œç”¨ |
|--------|------|------|
| `version` | `rss-desktop/package.json` | å½“å‰ç‰ˆæœ¬å· |
| `publish` | `electron-builder.json5` | æ›´æ–°æºé…ç½® |
| `latest-mac.yml` | GitHub Releases | macOS æ›´æ–°æ¸…å• |
| `latest.yml` | GitHub Releases | Windows æ›´æ–°æ¸…å• |
| `autoUpdater.channel` | ä»£ç ä¸­ | æ›´æ–°æ¸ é“ï¼ˆstable/betaï¼‰ |
| `autoUpdater.autoDownload` | ä»£ç ä¸­ | æ˜¯å¦è‡ªåŠ¨ä¸‹è½½ |

---

## ğŸ¯ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•
1. **ä½¿ç”¨ npm version å‘½ä»¤**ä¿®æ”¹ç‰ˆæœ¬å·ï¼ˆè‡ªåŠ¨åˆ›å»º commit å’Œ tagï¼‰
2. **éµå¾ª Semantic Versioning** è§„èŒƒ
3. **åœ¨ CI/CD ä¸­è‡ªåŠ¨å‘å¸ƒ** Release
4. **æä¾›è¯¦ç»†çš„ Release Notes** è¯´æ˜æ›´æ–°å†…å®¹
5. **æµ‹è¯•ç‰ˆä½¿ç”¨ç‹¬ç«‹æ¸ é“**ï¼ˆbeta/alphaï¼‰
6. **macOS åº”ç”¨ç­¾å**ï¼ˆé¿å… Gatekeeper è­¦å‘Šï¼‰

### âŒ é¿å…åšæ³•
1. ~~æ‰‹åŠ¨ä¸Šä¼ å®‰è£…åŒ…ä½†å¿˜è®°ä¸Šä¼  `latest-*.yml` æ–‡ä»¶~~
2. ~~ç‰ˆæœ¬å·ä½¿ç”¨é semver æ ¼å¼ï¼ˆå¦‚ "v1.0" æˆ– "2024.01"ï¼‰~~
3. ~~å‘å¸ƒ Release æ—¶ä¸æ‰“ Git Tag~~
4. ~~è·³è¿‡æ–‡ä»¶æ ¡éªŒï¼ˆä¿®æ”¹ electron-updater é…ç½®ï¼‰~~
5. ~~åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ `autoDownload: true`ï¼ˆå¯èƒ½å ç”¨ç”¨æˆ·å¸¦å®½ï¼‰~~

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [electron-updater å®˜æ–¹æ–‡æ¡£](https://www.electron.build/auto-update)
- [Semantic Versioning è§„èŒƒ](https://semver.org/)
- [GitHub Releases API](https://docs.github.com/en/rest/releases)
- [macOS Code Signing](https://developer.apple.com/support/code-signing/)
